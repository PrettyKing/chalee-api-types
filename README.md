# Chalee API Types

A powerful CLI tool for generating TypeScript types from API schemas with support for OpenAPI, JSON Schema, and custom formats.

## Features

- 🚀 Generate TypeScript types from various schema formats
- 📝 Support for OpenAPI/Swagger and JSON Schema
- 🔄 Sync types from remote API endpoints
- ✅ Schema validation with detailed error reporting
- 🎯 Project initialization with templates
- 🛠️ Customizable output formats (TypeScript, JavaScript, JSON)
- 📦 Easy integration with existing projects

## Installation

```bash
# Install from your private registry
npm install chalee-api-types --registry http://8.134.93.68:4873/

# Or install globally
npm install -g chalee-api-types --registry http://8.134.93.68:4873/
```

## Quick Start

```bash
# Initialize a new project
chalee-types init

# Generate types from schema
chalee-types generate --input ./schemas/api.json --output ./types

# Validate a schema file
chalee-types validate ./schemas/api.json

# Sync types from remote API
chalee-types sync --url https://api.example.com/openapi.json --output ./types
```

## Commands

### `init`
Initialize a new Chalee types project with templates and configuration.

```bash
chalee-types init [options]

Options:
  -t, --template <template>  Project template (basic|advanced) (default: "basic")
```

### `generate` (alias: `gen`)
Generate TypeScript types from API schema files.

```bash
chalee-types generate [options]

Options:
  -i, --input <path>     Input schema file path
  -o, --output <path>    Output directory (default: "./types")
  -f, --format <format>  Output format (ts|js|json) (default: "ts")
  --no-comments          Exclude comments in generated types
```

### `validate`
Validate API schema files for correctness and best practices.

```bash
chalee-types validate <schema> [options]

Arguments:
  schema                 Schema file to validate

Options:
  --strict              Enable strict validation mode
```

### `sync`
Synchronize types from remote API endpoints.

```bash
chalee-types sync [options]

Options:
  -u, --url <url>        API endpoint URL
  -o, --output <path>    Output directory (default: "./types")
  -h, --headers <json>   Custom headers (JSON format)
```

## Configuration

Create a `chalee.config.json` file in your project root:

```json
{
  "name": "my-api-types",
  "description": "API types for my project",
  "version": "1.0.0",
  "schemaPath": "./schemas",
  "outputPath": "./types",
  "format": "ts",
  "includeComments": true
}
```

## Supported Schema Formats

### OpenAPI/Swagger
```json
{
  "openapi": "3.0.0",
  "info": {
    "title": "My API",
    "version": "1.0.0"
  },
  "components": {
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" }
        }
      }
    }
  }
}
```

### JSON Schema
```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "User Schema",
  "definitions": {
    "User": {
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" }
      },
      "required": ["id", "name"]
    }
  }
}
```

## Examples

### Basic Usage
```bash
# Generate from local schema
chalee-types generate -i ./api-schema.json -o ./src/types

# Sync from remote API
chalee-types sync \
  --url https://petstore.swagger.io/v2/swagger.json \
  --output ./types \
  --headers '{"Authorization": "Bearer token"}'
```

### Project Structure
```
my-project/
├── schemas/
│   ├── user.json
│   └── product.json
├── types/           # Generated types
├── chalee.config.json
└── package.json
```

## Generated Output

Input schema:
```json
{
  "definitions": {
    "User": {
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "email": { "type": "string", "format": "email" }
      },
      "required": ["id", "name"]
    }
  }
}
```

Generated TypeScript:
```typescript
/**
 * API Types
 * Generated on: 2025-08-12T10:30:00.000Z
 * 
 * This file was automatically generated by chalee-api-types.
 * Do not edit this file directly.
 */

export interface User {
  id: string;
  name: string;
  email?: string;
}

export type { User };
```

## Development

```bash
# Clone the repository
git clone https://github.com/PrettyKing/chalee-api-types.git
cd chalee-api-types

# Install dependencies
npm install

# Build the project
npm run build

# Run in development mode
npm run dev

# Run tests
npm test

# Lint code
npm run lint

# Format code
npm run format
```

## Publishing to Private Registry

```bash
# Set registry for this package
npm config set registry http://8.134.93.68:4873/

# Login to your registry (if authentication required)
npm login --registry http://8.134.93.68:4873/

# Use the publish script
chmod +x scripts/publish.sh
./scripts/publish.sh

# Or publish manually
npm publish
```

## Project Structure

```
chalee-api-types/
├── src/
│   ├── index.ts              # Main CLI entry point
│   ├── commands/             # Command implementations
│   │   ├── generate.ts       # Generate command
│   │   ├── init.ts          # Init command
│   │   ├── validate.ts      # Validate command
│   │   └── sync.ts          # Sync command
│   └── utils/               # Utility classes
│       ├── schema-parser.ts # Schema parsing logic
│       └── type-generator.ts # Type generation logic
├── bin/
│   └── chalee-types.js      # Executable file
├── scripts/
│   └── publish.sh           # Publishing script
├── dist/                    # Built output (generated)
├── package.json
├── tsconfig.json
├── .eslintrc.js
├── .prettierrc
└── README.md
```

## Contributing

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## License

MIT License - see the [LICENSE](LICENSE) file for details.

## Changelog

### v1.0.0
- Initial release
- Basic CLI commands (init, generate, validate, sync)
- Support for OpenAPI and JSON Schema
- TypeScript, JavaScript, and JSON output formats
- Schema validation with error reporting
- Remote API synchronization
- Project templates and configuration